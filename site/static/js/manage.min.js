'use strict';(function(a,g,d){const l=Joomla.getOptions("csrf.token"),m=b=>{if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return a._pd(b),!1},e=b=>{a._pd(b);let c=b.dataTransfer.getData("imgsrc");if(c){let f=b.target.parentElement.getElementsByTagName("IMG")[0];f.src=c;f.style.opacity=null;a._id("albthmid").value=b.dataTransfer.getData("meeid")}},k=(b,c=!1)=>{if(document.querySelectorAll(b).length)return!0;c&&My_bb.alert(a._T("COM_MEEDYA_SELECT_SOME"));return!1},n=a._oM,t=a._P;a.postAction=t;a.setAlbumDanD=
()=>{var b=a._id("albthm");a._ae(b,"dragover",m);a._ae(b,"drop",e);a._ae(b,"dragenter",c=>{a._pd(c);c.target.style.opacity="0.5"});a._ae(b,"dragleave",c=>c.target.style.opacity=null);b=a._id("albForm");a._ae(b,"dragstart",c=>c.dataTransfer.setData("albthm","X"));a._ae(b,"dragover",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"dragenter",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"drop",
c=>{a._pd(c);a._id("albthmimg").src="components/com_meedya/static/img/img.png";a._id("albthmid").value=0})};a.deleteSelected=b=>{a._pd(b);k("[name='slctimg[]']:checked",!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_PERM_DELETE"),size:"modal-md",buttons:{confirm:{label:a._T("JACTION_DELETE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{c&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})};a.removeSelected=b=>{a._pd(b);k("[name='slctimg[]']:checked",
!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:a._T("COM_MEEDYA_VRB_REMOVE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{if(c){c=document.querySelectorAll("[name='slctimg[]']:checked");let f=c[0].parentNode.parentNode;for(let h=0;h<c.length;h++)f.removeChild(c[h].parentNode);v=!0;a.albdirt()}}})};a.selAllImg=(b,c)=>{a._pd(b);b=c?"checked":"";c=document.adminForm.elements["slctimg[]"];c.length||(c=[c]);for(let f=0;f<c.length;f++)c[f].checked=
b};a.editSelected=b=>{a._pd(b);k("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())};a.moveSelected=b=>{a._pd(b);const c=()=>{t("manage.getAlbumSelect",{exc:document.albForm.aid.value},f=>{document.querySelector("#mov2albdlg .modal-body").innerHTML=f},!1,()=>n("mov2albdlg"))};k("input[name='slctimg[]']:checked",!0)&&(a.albdirty?My_bb.confirm({message:a._T("COM_MEEDYA_LOSE_CHANGE"),size:"",buttons:{confirm:{label:a._T("JOK"),className:"btn-warning"},
cancel:{label:a._T("JCANCEL")}},callback:f=>{f&&c()}}):c())};a.addSelected=b=>{a._pd(b);k("input[name='slctimg[]']:checked",!0)&&n("add2albdlg")};a.selectedAction=(b,c)=>{switch(c){case "edts":a.editSelected(b);break;case "movs":a.moveSelected(b);break;case "adds":a.addSelected(b);break;case "rems":a.removeSelected(b);break;case "dels":a.deleteSelected(b)}};a.albAction=b=>{let c=b.target;switch(c.className){case "icon-edit":a._pd(b);d.location=g.aURL+"manage.editAlbum&aid="+c.parentElement.dataset.aid;
break;case "icon-upload":a._pd(b);d.location=g.aURL+"manage.doUpload&aid="+c.parentElement.dataset.aid;break;case "icon-delete":a._pd(b);a.alb2delete=c.parentElement.dataset.aid;n("delact");break;case "album":a.AArrange.iSelect(b,c)}};a.saveAlbum=()=>{v&&(document.albForm.thmord.value=a.Arrange.iord());document.albForm.submit()};a.deleteAlbum=b=>{b=document.forms.dalbform;b.aid.value=a.alb2delete;b.submit()};a.watchAlb=b=>{let c=a._id("creab");0<b.value?(a._id("creanualb").style.display="none",c.disabled=
!1):(c.disabled=!0,-1==b.value?a._id("creanualb").style.display="block":a._id("creanualb").style.display="none")};a.watchAlbNam=b=>{let c=a._id("creab");b.value.trim()?c.disabled=!1:c.disabled=!0};a.addItems2Album=b=>{b.disabled=!0;document.adminForm.albumid.value=a._id("h5u_album").value;document.adminForm.nualbnam.value=a._id("nualbnam").value;document.adminForm.nualbpar.value=a._id("h5u_palbum").value;document.adminForm.nualbdesc.value=a._id("albdesc").value;document.adminForm.task.value="manage.addItemsToAlbum";
document.adminForm.submit()};a.movItems2Album=b=>{b.disabled=!0;document.adminForm.fromalb.value=document.albForm.aid.value;document.adminForm.albumid.value=a._id("h5u_album").value;document.adminForm.nualbnam.value=a._id("nualbnam").value;document.adminForm.nualbpar.value=a._id("h5u_palbum").value;document.adminForm.nualbdesc.value=a._id("albdesc").value;document.adminForm.task.value="manage.movItemsToAlbum";document.adminForm.submit()};a.ae_createAlbum=b=>{b.disabled=!0;b=a._id("nualbnam");let c=
a._id("h5u_palbum"),f=a._id("albdesc");b={albnam:b.value.trim(),paralb:c?c.value:0,albdesc:f.value};b[l]=1;t("manage.newAlbum",b,h=>{h?alert(h):d.location.reload(!0)})};let p=null;a.moveItem=(b,c)=>{a._pd(b,!0);b=c.parentElement;if(p){p.classList.remove("moving");if(b!=p){c=a._id("area");let f=c.removeChild(p);c.insertBefore(f,b)}p=null}else p=b,b.classList.add("moving")};a.setVideoThumb=(b,c)=>{a._pd(b,!0);b=document.getElementById("my-video-canvas");let f=b.getContext("2d"),h=document.querySelector("#zoom-zvid"),
w=document.getElementById("my-vidover"),y=0,q=h.videoWidth,u=h.videoHeight,r=0,x=0,z=w.width,A=w.height;h?(0<c?(r=160,x=Math.min(u/r,q/160),q=Math.round(160*x),u=Math.round(r*x),y=0<h.videoWidth-q?h.videoWidth-q>>1:0):r=Math.round(160/(q/u)),b.width=160,b.height=r,f.drawImage(h,y,0,q,u,0,0,160,r),f.drawImage(w,0,0,z,A,3,3,z,A),b=b.toDataURL("image/jpeg",.8),c={vid:c,imgBase64:b},c[l]=1,t("manage.setVideoThumb",c,B=>{a.thmelmsrc.src=B;a.Zoom.close()})):alert("Did not locate the video.")};let v=!1;
a.dirtyThumbs=b=>{(v=b)&&a.albdirt()}})(window.Meedya=window.Meedya||{},Joomla.getOptions("Meedya"),window);
(function(a){let g,d,l=e=>{e&&a._pd(e);document.body.removeChild(g)},m=e=>{switch("keydown"==e.type?e.keyCode:e.charCode){case 32:case 13:case 27:l(e)}};a.Zoom={open:(e,k)=>{k&&(a.thmelmsrc=k.parentElement.previousElementSibling.firstElementChild);d=document.createElement("div");a.postAction("manage.getZoomItem",{iid:e},n=>{d.innerHTML=n});d.className="zoom-area";d.tabIndex="-1";g=document.createElement("div");g.className="zoom-back";g.appendChild(d);document.body.appendChild(g);a._ae(d,"keypress",
m);a._ae(d,"keydown",m);d.focus();a._ae(g,"click",l)},close:l}})(Meedya);
(function(a){let g,d,l=e=>{e&&a._pd(e);document.body.removeChild(g)},m=e=>{switch("keydown"==e.type?e.keyCode:e.charCode){case 32:case 13:case 27:l(e)}};a.itmInfo={open:(e,k)=>{k&&(a.thmelmsrc=k.parentElement.previousElementSibling.firstElementChild);d=document.createElement("div");a.postAction("manage.getItemInfo",{iid:e},n=>{d.innerHTML=n});d.className="info-area";d.tabIndex="-1";g=document.createElement("div");g.className="zoom-back";g.appendChild(d);document.body.appendChild(g);a._ae(d,"keypress",
m);a._ae(d,"keydown",m);d.focus();a._ae(g,"click",l)},close:l}})(Meedya);