/*
	Copyright (C) 2022 RJCreations. All rights reserved.
 @license		GNU General Public License version 3 or later; see LICENSE.txt
*/
'use strict';(function(a,h,f){const l=Joomla.getOptions("csrf.token"),q=b=>{if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return a._pd(b),!1},g=b=>{a._pd(b);let c=b.dataTransfer.getData("imgsrc");if(c){let d=b.target.parentElement.getElementsByTagName("IMG")[0];d.src=c;d.style.opacity=null;a._id("albthmid").value=b.dataTransfer.getData("meeid")}},k=(b,c=!1)=>{if(document.querySelectorAll(b).length)return!0;c&&My_bb.alert(a._T("COM_MEEDYA_SELECT_SOME"));return!1},r=a._oM,u=a._P;a.postAction=u;a.setAlbumDanD=
()=>{var b=a._id("albthm");a._ae(b,"dragover",q);a._ae(b,"drop",g);a._ae(b,"dragenter",c=>{a._pd(c);c.target.style.opacity="0.5"});a._ae(b,"dragleave",c=>c.target.style.opacity=null);b=a._id("albForm");a._ae(b,"dragstart",c=>c.dataTransfer.setData("albthm","X"));a._ae(b,"dragover",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"dragenter",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"drop",
c=>{a._pd(c);a._id("albthmimg").src="components/com_meedya/static/img/img.png";a._id("albthmid").value=0})};a.deleteSelected=b=>{a._pd(b);k("[name='slctimg[]']:checked",!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_PERM_DELETE"),size:"modal-lg",buttons:{confirm:{label:a._T("JACTION_DELETE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{c&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})};a.removeSelected=b=>{a._pd(b);k("[name='slctimg[]']:checked",
!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:a._T("COM_MEEDYA_VRB_REMOVE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{if(c){c=document.querySelectorAll("[name='slctimg[]']:checked");let d=c[0].parentNode.parentNode;for(let e=0;e<c.length;e++)d.removeChild(c[e].parentNode);v=!0}}})};a.selAllImg=(b,c)=>{a._pd(b);b=c?"checked":"";c=document.adminForm.elements["slctimg[]"];c.length||(c=[c]);for(let d=0;d<c.length;d++)c[d].checked=b};a.editSelected=
b=>{a._pd(b);k("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())};a.addSelected=b=>{a._pd(b);k("input[name='slctimg[]']:checked",!0)&&r("add2albdlg")};a.albAction=b=>{let c=b.target;switch(c.className){case "icon-edit":a._pd(b);f.location=h.aURL+"manage.editAlbum&aid="+c.parentElement.dataset.aid;break;case "icon-upload":a._pd(b);f.location=h.aURL+"manage.doUpload&aid="+c.parentElement.dataset.aid;break;case "icon-delete":a._pd(b);
a.alb2delete=c.parentElement.dataset.aid;r("delact");break;case "album":a.AArrange.iSelect(b,c)}};a.saveAlbum=()=>{v&&(document.albForm.thmord.value=a.Arrange.iord());document.albForm.submit()};a.deleteAlbum=b=>{b=document.forms.dalbform;b.aid.value=a.alb2delete;b.submit()};a.watchAlb=b=>{let c=a._id("creab");0<b.value?(a._id("creanualb").style.display="none",c.disabled=!1):(c.disabled=!0,-1==b.value?a._id("creanualb").style.display="block":a._id("creanualb").style.display="none")};a.watchAlbNam=
b=>{let c=a._id("creab");b.value.trim()?c.disabled=!1:c.disabled=!0};a.addItems2Album=b=>{b.disabled=!0;document.adminForm.albumid.value=a._id("h5u_album").value;document.adminForm.nualbnam.value=a._id("nualbnam").value;document.adminForm.nualbpar.value=a._id("h5u_palbum").value;document.adminForm.nualbdesc.value=a._id("albdesc").value;document.adminForm.task.value="manage.addItemsToAlbum";document.adminForm.submit()};a.ae_createAlbum=b=>{b.disabled=!0;b=a._id("nualbnam");let c=a._id("h5u_palbum"),
d=a._id("albdesc");b={albnam:b.value.trim(),paralb:c?c.value:0,albdesc:d.value};b[l]=1;u("manage.newAlbum",b,e=>{e?alert(e):f.location.reload(!0)})};let m=null;a.moveItem=(b,c)=>{a._pd(b,!0);b=c.parentElement;if(m){m.classList.remove("moving");if(b!=m){c=a._id("area");let d=c.removeChild(m);c.insertBefore(d,b)}m=null}else m=b,b.classList.add("moving")};a.setVideoThumb=(b,c)=>{a._pd(b,!0);b=document.getElementById("my-video-canvas");let d=b.getContext("2d"),e=document.querySelector("#zoom-zvid"),w=
document.getElementById("my-vidover"),y=0,n=e.videoWidth,t=e.videoHeight,p=0,x=0,z=w.width,A=w.height;e?(0<c?(p=160,x=Math.min(t/p,n/160),n=Math.round(160*x),t=Math.round(p*x),y=0<e.videoWidth-n?e.videoWidth-n>>1:0):p=Math.round(160/(n/t)),b.width=160,b.height=p,d.drawImage(e,y,0,n,t,0,0,160,p),d.drawImage(w,0,0,z,A,3,3,z,A),b=b.toDataURL("image/jpeg",.8),c={vid:c,imgBase64:b},c[l]=1,u("manage.setVideoThumb",c,B=>{a.thmelmsrc.src=B;a.Zoom.close()})):alert("Did not locate the video.")};let v=!1;a.dirtyThumbs=
b=>{v=b}})(window.Meedya=window.Meedya||{},Joomla.getOptions("Meedya"),window);
(function(a){let h,f,l=g=>{g&&Meedya._pd(g);document.body.removeChild(h)},q=g=>{switch("keydown"==g.type?g.keyCode:g.charCode){case 32:case 13:case 27:l(g)}};a.Zoom={open:(g,k)=>{k&&(a.thmelmsrc=k.parentElement.previousElementSibling.firstElementChild);f=document.createElement("div");a.postAction("manage.getZoomItem",{iid:g},r=>{f.innerHTML=r});f.className="zoom-area";f.tabIndex="-1";h=document.createElement("div");h.className="zoom-back";h.appendChild(f);document.body.appendChild(h);Meedya._ae(f,
"keypress",q);Meedya._ae(f,"keydown",q);f.focus();Meedya._ae(h,"click",l)},close:l}})(Meedya);