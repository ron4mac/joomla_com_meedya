"undefined"===typeof Meedya&&(Meedya={});function _pd(b,c){c=void 0===c?!0:c;b.preventDefault&&b.preventDefault();c&&b.stopPropagation&&b.stopPropagation()}function _ae(b,c,h,f){b.addEventListener(c,h,void 0===f?!1:f)}
var Arrange=function(b){function c(a){a=a.dataTransfer.types;for(var d=0;d<a.length;++d)if("meeid"===a[d])return!0;return!1}function h(a){this.style.opacity="0.4";u=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"));a.dataTransfer.setData("imgsrc",this.getElementsByTagName("IMG")[0].src)}function f(a){if(c(a))return _pd(a),a.dataTransfer.dropEffect="move",!1}function g(a){if(c(a))return _pd(a),this.classList.add("over"),!1}function m(a){this.classList.remove("over")}
function l(a){_pd(a);if(u!=this){a=document.getElementById(n);var d=a.removeChild(u);a.insertBefore(d,this)}return!1}function k(a){this.style.opacity="1.0";[].forEach.call(q,function(d){d.classList.remove("over")});itmend.classList.remove("over");p=!0}function v(a){p=!0;50>a.clientY&&(p=!1,t(-1));a.clientY>b(window).height()-50&&(p=!1,t(1))}function w(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}var u=null,p=!0,n="",r="",q,t=function(a){var d=
b(window).scrollTop();b(window).scrollTop(d+a);p||setTimeout(function(){t(a)},60)};return{init:function(a,d){n=a;r=d;q=document.querySelectorAll("#"+a+" ."+d);[].forEach.call(q,function(e){_ae(e,"drag",v);_ae(e,"dragstart",h);_ae(e,"dragenter",g);_ae(e,"dragover",f);_ae(e,"dragleave",m);_ae(e,"drop",l);_ae(e,"dragend",k);_ae(e,"touchmove",w)})},iord:function(){q=document.querySelectorAll("#"+n+" ."+r);var a=[];[].forEach.call(q,function(d){(d=d.getAttribute("data-id"))&&a.push(d)});return a.join("|")}}}(jQuery),
AArrange=function(b){function c(a,d,e){a={task:"manage.adjustAlbPaid",aid:a,paid:d};a[Joomla.getOptions("csrf.token","")]=1;b.post(Meedya.rawURL,a,function(x){x&&console.log(x);e(x)})}function h(a){a.target.style.opacity="0.4";p=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"))}function f(a){a:{var d=a.dataTransfer.types;for(var e=0;e<d.length;++e)if("meeid"===d[e]){d=!0;break a}d=!1}if(d)return _pd(a),a.dataTransfer.dropEffect="move",!1}function g(a){_pd(a);
this.classList.add("over");return!1}function m(a){_pd(a);this.classList.remove("over")}function l(a){_pd(a);p!=this&&(sa=p.getAttribute("data-aid"),da=a.target.getAttribute("data-aid"),c(sa,da,function(d){d?alert(Joomla.JText._("COM_MEEDYA_MOVE_FAIL")):a.target.append(p)}));return!1}function k(a){this.style.opacity="1.0";[].forEach.call(q,function(d){d.classList.remove("over")});r=!0}function v(a){r=!0;50>a.clientY&&(r=!1,t(-1));a.clientY>b(window).height()-50&&(r=!1,t(1))}function w(a){1==a.targetTouches.length&&
(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}function u(a){_pd(a);n&&n.classList.remove("slctd");this==n?n=null:(n=this,n.classList.add("slctd"))}var p=null,n=null,r=!0,q,t=function(a){var d=b(window).scrollTop();b(window).scrollTop(d+a);r||setTimeout(function(){t(a)},500)};return{init:function(a,d){q=document.querySelectorAll("#"+a+" ."+d);[].forEach.call(q,function(e){_ae(e,"drag",v);_ae(e,"dragstart",h,!0);_ae(e,"dragenter",g);_ae(e,"dragover",f);_ae(e,"dragleave",
m);_ae(e,"drop",l);_ae(e,"dragend",k);_ae(e,"touchmove",w);_ae(e,"click",u)})},selalb:function(){return n?n.getAttribute("data-aid"):0}}}(jQuery);function setDlgParAlb(){document.getElementById("h5u_palbum").value=AArrange.selalb()}
function allow_group_select_checkboxes(b){var c=null,h=document.querySelectorAll("#"+b+' input[type="checkbox"]');for(b=0;b<h.length;b++)h[b].setAttribute("data-index",b);for(b=0;b<h.length;b++)h[b].addEventListener("click",function(f){if(c&&f.shiftKey){var g=parseInt(c.getAttribute("data-index")),m=parseInt(this.getAttribute("data-index"));f=this.checked;var l=g,k=m;g>m&&(l=m,k=g);for(g=0;g<h.length;g++)l<=g&&g<=k&&(h[g].checked=f)}c=this})}
function handleAlbthmDragOver(b){if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return _pd(b),b.dataTransfer.dropEffect="copy",!1}function handleAlbthmDrop(b){_pd(b);var c=b.dataTransfer.getData("imgsrc");c&&(this.getElementsByTagName("IMG")[0].src=c,document.getElementById("albthmid").value=b.dataTransfer.getData("meeid"));this.style.opacity="1.0"}
function removeAlbThm(){document.getElementById("albthmimg").src="components/com_meedya/static/img/img.png";document.getElementById("albthmid").value=0}function hasSelections(b,c){c=void 0===c?!1:c;if(document.querySelectorAll(b).length)return!0;c&&bootbox.alert(Joomla.JText._("COM_MEEDYA_SELECT_SOME"));return!1}
function deleteSelected(b){_pd(b);hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_PERM_DELETE"),buttons:{confirm:{label:Joomla.JText._("JACTION_DELETE"),className:"btn-danger"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(c){c&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})}
function removeSelected(b){_pd(b);hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:Joomla.JText._("COM_MEEDYA_VRB_REMOVE"),className:"btn-primary"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(c){if(c){c=document.querySelectorAll("[name='slctimg[]']:checked");for(var h=c[0].parentNode.parentNode,f=0;f<c.length;f++)h.removeChild(c[f].parentNode)}}})}
function selAllImg(b,c){_pd(b);var h=c?"checked":"",f=document.adminForm.elements["slctimg[]"];f.length||(f=[f]);for(var g=0;g<f.length;g++)f[g].checked=h}function editSelected(b){_pd(b);hasSelections("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())}function addSelected(b){_pd(b);hasSelections("input[name='slctimg[]']:checked",!0)&&jQuery("#add2albdlg").modal("show")}
function saveAlbum(){document.albForm.thmord.value=Arrange.iord();document.albForm.submit()}
(function(b,c){function h(k){switch(k.charCode){case 32:case 13:case 27:g(k)}}function f(k){switch(k.keyCode){case 32:case 13:case 27:g(k)}}function g(k){_pd(k);document.body.removeChild(m)}var m,l;c.iZoomOpen=function(k){l=document.createElement("div");b.post(Meedya.rawURL,{task:"manage.getZoomItem",iid:k},function(v){l.innerHTML=v});l.className="zoom-area";l.tabIndex="-1";m=document.createElement("div");m.className="zoom-back";m.appendChild(l);document.body.appendChild(m);l.addEventListener("keypress",
h,!1);l.addEventListener("keydown",f,!1);l.focus();m.addEventListener("click",g,!1)};c.iZoomClose=g})(jQuery,window);