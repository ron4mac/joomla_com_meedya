'use strict';(function(a,h,e){const k=Joomla.getOptions("csrf.token"),p=b=>{if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return a._pd(b),!1},f=b=>{a._pd(b);let c=b.dataTransfer.getData("imgsrc");if(c){let d=b.target.parentElement.getElementsByTagName("IMG")[0];d.src=c;d.style.opacity=null;a._id("albthmid").value=b.dataTransfer.getData("meeid")}},l=(b,c=!1)=>{if(document.querySelectorAll(b).length)return!0;c&&My_bb.alert(a._T("COM_MEEDYA_SELECT_SOME"));return!1},n=a._oM,q=a._P;a.postAction=q;a.setAlbumDanD=
()=>{var b=a._id("albthm");a._ae(b,"dragover",p);a._ae(b,"drop",f);a._ae(b,"dragenter",c=>{a._pd(c);c.target.style.opacity="0.5"});a._ae(b,"dragleave",c=>c.target.style.opacity=null);b=a._id("albForm");a._ae(b,"dragstart",c=>c.dataTransfer.setData("albthm","X"));a._ae(b,"dragover",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"dragenter",c=>{0<c.dataTransfer.types.indexOf("albthm")&&(a._pd(c),c.dataTransfer.dropEffect="move")});a._ae(b,"drop",
c=>{a._pd(c);a._id("albthmimg").src="components/com_meedya/static/img/img.png";a._id("albthmid").value=0})};a.deleteSelected=b=>{a._pd(b);l("[name='slctimg[]']:checked",!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_PERM_DELETE"),size:"modal-md",buttons:{confirm:{label:a._T("JACTION_DELETE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{c&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})};a.removeSelected=b=>{a._pd(b);l("[name='slctimg[]']:checked",
!0)&&My_bb.confirm({message:a._T("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:a._T("COM_MEEDYA_VRB_REMOVE"),className:"btn-danger"},cancel:{label:a._T("JCANCEL")}},callback:c=>{if(c){c=document.querySelectorAll("[name='slctimg[]']:checked");let d=c[0].parentNode.parentNode;for(let g=0;g<c.length;g++)d.removeChild(c[g].parentNode);w=!0;a.albdirt()}}})};a.selAllImg=(b,c)=>{a._pd(b);b=c?"checked":"";c=document.adminForm.elements["slctimg[]"];c.length||(c=[c]);for(let d=0;d<c.length;d++)c[d].checked=
b};a.editSelected=b=>{a._pd(b);l("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())};a.moveSelected=b=>{a._pd(b);const c=()=>{q("ManRaw.getAlbumSelect",{exc:document.albForm.aid.value},d=>{document.querySelector("#mov2albdlg .modal-body").innerHTML=d},!1,()=>n("mov2albdlg"))};l("input[name='slctimg[]']:checked",!0)&&(a.albdirty?My_bb.confirm({message:a._T("COM_MEEDYA_LOSE_CHANGE"),size:"",buttons:{confirm:{label:a._T("JOK"),className:"btn-warning"},
cancel:{label:a._T("JCANCEL")}},callback:d=>{d&&c()}}):c())};a.addSelected=b=>{a._pd(b);l("input[name='slctimg[]']:checked",!0)&&n("add2albdlg")};a.selectedAction=(b,c)=>{switch(c){case "edts":a.editSelected(b);break;case "movs":a.moveSelected(b);break;case "adds":a.addSelected(b);break;case "rems":a.removeSelected(b);break;case "dels":a.deleteSelected(b)}};a.albAction=b=>{let c=b.target;switch(c.className){case "icon-edit":a._pd(b);e.location=h.aURL+"manage.editAlbum&aid="+c.parentElement.dataset.aid;
break;case "icon-upload":a._pd(b);e.location=h.aURL+"manage.doUpload&aid="+c.parentElement.dataset.aid;break;case "icon-delete":a._pd(b);a.alb2delete=c.parentElement.dataset.aid;n("delact");break;case "album":a.AArrange.iSelect(b,c);break;case "icon-edit aclone":a._pd(b),q("ManRaw.getAlbum",{aid:c.parentElement.dataset.aid},d=>{a._id("clnaid").value=d.aid;a._id("clalbnamed").value=d.title;a._id("cln_palbumed").value=d.paid;a._id("clalbdesced").innerHTML=d.desc;n("clnalbdlged")},!0)}};a.saveAlbum=
()=>{w&&(document.albForm.thmord.value=a.Arrange.iord());document.albForm.submit()};a.deleteAlbum=b=>{b=document.forms.dalbform;b.aid.value=a.alb2delete;b.submit()};a.watchAlb=b=>{let c=a._id("creab");0<b.value?(a._id("creanualb").style.display="none",c.disabled=!1):(c.disabled=!0,-1==b.value?a._id("creanualb").style.display="block":a._id("creanualb").style.display="none")};a.watchAlbNam=(b,c="creab")=>{c=a._id(c);b.value.trim()?c.disabled=!1:c.disabled=!0};a.addItems2Album=b=>{b.disabled=!0;document.adminForm.albumid.value=
a._id("h5u_album").value;document.adminForm.nualbnam.value=a._id("nualbnam").value;document.adminForm.nualbpar.value=a._id("h5u_palbum").value;document.adminForm.nualbdesc.value=a._id("albdesc").value;document.adminForm.task.value="manage.addItemsToAlbum";document.adminForm.submit()};a.movItems2Album=b=>{b.disabled=!0;document.adminForm.fromalb.value=document.albForm.aid.value;document.adminForm.albumid.value=a._id("h5u_album").value;document.adminForm.nualbnam.value=a._id("nualbnam").value;document.adminForm.nualbpar.value=
a._id("h5u_palbum").value;document.adminForm.nualbdesc.value=a._id("albdesc").value;document.adminForm.task.value="manage.movItemsToAlbum";document.adminForm.submit()};a.ae_createAlbum=b=>{b.disabled=!0;b=a._id("nualbnam");let c=a._id("h5u_palbum"),d=a._id("albdesc");b={albnam:b.value.trim(),paralb:c?c.value:0,albdesc:d.value};b[k]=1;q("ManRaw.newAlbum",b,g=>{g?alert(g):e.location.reload(!0)})};a.ae_cloneAlbum=b=>{b.disabled=!0;b=a._id("clalbnam");let c=a._id("cln_palbum"),d=a._id("clalbdesc"),g=
a._id("oaid");b={albnam:b.value.trim(),paralb:c?c.value:0,albdesc:d.value,oaid:g.value};b[k]=1;q("ManRaw.clnAlbum",b,m=>{m?alert(m):e.location.reload(!0)})};a.ae_cloneAlbSave=b=>{b.disabled=!0;b=a._id("clalbnamed");let c=a._id("cln_palbumed"),d=a._id("clalbdesced"),g=a._id("clnaid");b={albnam:b.value.trim(),paralb:c?c.value:0,albdesc:d.value,aid:g.value};b[k]=1;q("ManRaw.clnAlbSave",b,m=>{m?alert(m):e.location.reload(!0)})};let r=null;a.moveItem=(b,c)=>{a._pd(b,!0);b=c.parentElement;if(r){r.classList.remove("moving");
if(b!=r){c=a._id("area");let d=c.removeChild(r);c.insertBefore(d,b)}r=null}else r=b,b.classList.add("moving")};a.setVideoThumb=(b,c)=>{a._pd(b,!0);b=document.getElementById("my-video-canvas");let d=b.getContext("2d"),g=document.querySelector("#zoom-zvid"),m=document.getElementById("my-vidover"),y=0,t=g.videoWidth,v=g.videoHeight,u=0,x=0,z=m.width,A=m.height;g?(0<c?(u=160,x=Math.min(v/u,t/160),t=Math.round(160*x),v=Math.round(u*x),y=0<g.videoWidth-t?g.videoWidth-t>>1:0):u=Math.round(160/(t/v)),b.width=
160,b.height=u,d.drawImage(g,y,0,t,v,0,0,160,u),d.drawImage(m,0,0,z,A,3,3,z,A),b=b.toDataURL("image/jpeg",.8),c={vid:c,imgBase64:b},c[k]=1,q("ManRaw.setVideoThumb",c,B=>{a.thmelmsrc.src=B;a.Zoom.close()})):alert("Did not locate the video.")};let w=!1;a.dirtyThumbs=b=>{(w=b)&&a.albdirt()}})(window.Meedya=window.Meedya||{},Joomla.getOptions("Meedya"),window);
(function(a){let h,e,k=f=>{f&&a._pd(f);document.body.removeChild(h)},p=f=>{switch("keydown"==f.type?f.keyCode:f.charCode){case 32:case 13:case 27:k(f)}};a.Zoom={open:(f,l)=>{l&&(a.thmelmsrc=l.parentElement.previousElementSibling.firstElementChild);e=document.createElement("div");a.postAction("ManRaw.getZoomItem",{iid:f},n=>{e.innerHTML=n});e.className="zoom-area";e.tabIndex="-1";h=document.createElement("div");h.className="zoom-back";h.appendChild(e);document.body.appendChild(h);a._ae(e,"keypress",
p);a._ae(e,"keydown",p);e.focus();a._ae(h,"click",k)},close:k}})(Meedya);
(function(a){let h,e,k=f=>{f&&a._pd(f);document.body.removeChild(h)},p=f=>{switch("keydown"==f.type?f.keyCode:f.charCode){case 32:case 13:case 27:k(f)}};a.itmInfo={open:(f,l)=>{l&&(a.thmelmsrc=l.parentElement.previousElementSibling.firstElementChild);e=document.createElement("div");a.postAction("ManRaw.getItemInfo",{iid:f},n=>{e.innerHTML=n});e.className="info-area";e.tabIndex="-1";h=document.createElement("div");h.className="zoom-back";h.appendChild(e);document.body.appendChild(h);a._ae(e,"keypress",
p);a._ae(e,"keydown",p);e.focus();a._ae(h,"click",k)},close:k}})(Meedya);