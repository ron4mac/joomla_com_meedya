"undefined"===typeof Meedya&&(Meedya={});function _id(h){return document.getElementById(h)}function _pd(h,k){k=void 0===k?!0:k;h.preventDefault&&h.preventDefault();k&&h.stopPropagation&&h.stopPropagation()}function _ae(h,k,q,m){h.addEventListener(k,q,void 0===m?!1:m)}
(function(h){function k(c){if(!(0>c.dataTransfer.types.indexOf("imgsrc")))return _pd(c),c.dataTransfer.dropEffect="copy",!1}function q(c){_pd(c);var b=c.dataTransfer.getData("imgsrc");b&&(this.getElementsByTagName("IMG")[0].src=b,_id("albthmid").value=c.dataTransfer.getData("meeid"));this.style.opacity="1.0"}function m(c,b){b=void 0===b?!1:b;if(document.querySelectorAll(c).length)return!0;b&&bootbox.alert(Joomla.JText._("COM_MEEDYA_SELECT_SOME"));return!1}Meedya.setDlgParAlb=function(){_id("h5u_palbum").value=
Meedya.AArrange.selalb()};Meedya.setAlbumDanD=function(){var c=_id("albthm");_ae(c,"dragover",k,!1);_ae(c,"drop",q,!1);_ae(c,"dragenter",function(){this.style.opacity="0.5"},!1);_ae(c,"dragleave",function(){this.style.opacity="1.0"},!1);c=_id("albForm");_ae(c,"dragstart",function(b){b.dataTransfer.setData("albthm","X")},!1);_ae(c,"dragover",function(b){0<b.dataTransfer.types.indexOf("albthm")&&(_pd(b),b.dataTransfer.dropEffect="move")},!1);_ae(c,"dragenter",function(b){0<b.dataTransfer.types.indexOf("albthm")&&
(_pd(b),b.dataTransfer.dropEffect="move")},!1);_ae(c,"drop",function(b){_pd(b);_id("albthmimg").src="components/com_meedya/static/img/img.png";_id("albthmid").value=0},!1)};Meedya.deleteSelected=function(c){_pd(c);m("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_PERM_DELETE"),buttons:{confirm:{label:"JACTION_DELETE",className:"btn-danger"},cancel:{label:"JCANCEL"}},callback:function(b){b&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})};
Meedya.removeSelected=function(c){_pd(c);m("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:"COM_MEEDYA_VRB_REMOVE",className:"btn-danger"},cancel:{label:"JCANCEL"}},callback:function(b){if(b){b=document.querySelectorAll("[name='slctimg[]']:checked");for(var d=b[0].parentNode.parentNode,f=0;f<b.length;f++)d.removeChild(b[f].parentNode)}}})};Meedya.selAllImg=function(c,b){_pd(c);var d=b?"checked":"",f=document.adminForm.elements["slctimg[]"];
f.length||(f=[f]);for(var l=0;l<f.length;l++)f[l].checked=d};Meedya.editSelected=function(c){_pd(c);m("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())};Meedya.addSelected=function(c){_pd(c);m("input[name='slctimg[]']:checked",!0)&&h("#add2albdlg").modal("show")};Meedya.saveAlbum=function(){document.albForm.thmord.value=Meedya.Arrange.iord();document.albForm.submit()};Meedya.watchAlb=function(c){var b=_id("creab"),d=b.classList;0<
c.value?(_id("creanualb").style.display="none",d.remove("btn-disabled"),d.add("btn-primary"),b.disabled=!1):(d.remove("btn-primary"),d.add("btn-disabled"),b.disabled=!0,-1==c.value?_id("creanualb").style.display="block":_id("creanualb").style.display="none")};Meedya.watchAlbNam=function(c){var b=_id("creab"),d=b.classList;c.value.trim()?(d.remove("btn-disabled"),d.add("btn-primary"),b.disabled=!1):(d.remove("btn-primary"),d.add("btn-disabled"),b.disabled=!0)};Meedya.addItems2Album=function(c){c.disabled=
!0;document.adminForm.albumid.value=_id("h5u_album").value;document.adminForm.nualbnam.value=_id("nualbnam").value;document.adminForm.nualbpar.value=_id("h5u_palbum").value;document.adminForm.nualbdesc.value=_id("albdesc").value;document.adminForm.task.value="manage.addItemsToAlbum";document.adminForm.submit()};Meedya.aj_addItems2Album=function(c){c.disabled=!0;var b=_id("nualbnam"),d=_id("h5u_palbum"),f=_id("albdesc");b={task:"manage.addItemsToAlbum",albnam:b.value.trim(),paralb:d?d.value:0,albdesc:f.value};
b[Meedya.formTokn]=1;h.post(Meedya.rawURL,b,function(l,v,r){"success"==v?l?alert(l):window.location.reload(!0):alert(r.statusText);c.disabled=!1})};Meedya.ae_createAlbum=function(c){c.disabled=!0;var b=_id("nualbnam"),d=_id("h5u_palbum"),f=_id("albdesc");b={task:"manage.newAlbum",albnam:b.value.trim(),paralb:d?d.value:0,albdesc:f.value};b[Meedya.formTokn]=1;h.post(Meedya.rawURL,b,function(l,v,r){"success"==v?(jQuery("#newalbdlg").modal("hide"),l?alert(l):window.location.reload(!0)):alert(r.statusText);
c.disabled=!1})}})(jQuery);
Meedya.Arrange=function(h){function k(a){a=a.dataTransfer.types;for(var e=0;e<a.length;++e)if("meeid"===a[e])return!0;return!1}function q(a){this.style.opacity="0.4";r=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"));a.dataTransfer.setData("imgsrc",this.getElementsByTagName("IMG")[0].src)}function m(a){if(k(a))return _pd(a),a.dataTransfer.dropEffect="move",!1}function c(a){if(k(a))return _pd(a),this.classList.add("over"),!1}function b(a){this.classList.remove("over")}
function d(a){_pd(a);if(r!=this){a=_id(n);var e=a.removeChild(r);a.insertBefore(e,this)}return!1}function f(a){this.style.opacity="1.0";[].forEach.call(t,function(e){e.classList.remove("over")});itmend.classList.remove("over");p=!0}function l(a){p=!0;50>a.clientY&&(p=!1,w(-1));a.clientY>h(window).height()-50&&(p=!1,w(1))}function v(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}var r=null,p=!0,n="",u="",t,w=function(a){var e=h(window).scrollTop();
h(window).scrollTop(e+a);p||setTimeout(function(){w(a)},60)};return{init:function(a,e){n=a;u=e;t=document.querySelectorAll("#"+a+" ."+e);[].forEach.call(t,function(g){_ae(g,"drag",l);_ae(g,"dragstart",q);_ae(g,"dragenter",c);_ae(g,"dragover",m);_ae(g,"dragleave",b);_ae(g,"drop",d);_ae(g,"dragend",f);_ae(g,"touchmove",v)})},iord:function(){t=document.querySelectorAll("#"+n+" ."+u);var a=[];[].forEach.call(t,function(e){(e=e.getAttribute("data-id"))&&a.push(e)});return a.join("|")}}}(jQuery);
Meedya.AArrange=function(h){function k(a,e,g){a={task:"manage.adjustAlbPaid",aid:a,paid:e};a[Joomla.getOptions("csrf.token","")]=1;h.post(Meedya.rawURL,a,function(x){g(x)})}function q(a){a.target.style.opacity="0.4";p=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"))}function m(a){a:{var e=a.dataTransfer.types;for(var g=0;g<e.length;++g)if("meeid"===e[g]){e=!0;break a}e=!1}if(e)return _pd(a),a.dataTransfer.dropEffect="move",!1}function c(a){_pd(a);
this.classList.add("over");return!1}function b(a){_pd(a);this.classList.remove("over")}function d(a){_pd(a);p!=this&&(sa=p.getAttribute("data-aid"),da=a.target.getAttribute("data-aid"),k(sa,da,function(e){e?bootbox.alert(Joomla.JText._("COM_MEEDYA_MOVE_FAIL")):a.target.append(p)}));return!1}function f(a){this.style.opacity="1.0";[].forEach.call(t,function(e){e.classList.remove("over")});u=!0}function l(a){u=!0;50>a.clientY&&(u=!1,w(-1));a.clientY>h(window).height()-50&&(u=!1,w(1))}function v(a){1==
a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}function r(a){_pd(a);n&&n.classList.remove("slctd");this==n?n=null:(n=this,n.classList.add("slctd"))}var p=null,n=null,u=!0,t,w=function(a){var e=h(window).scrollTop();h(window).scrollTop(e+a);u||setTimeout(function(){w(a)},500)};return{init:function(a,e){t=document.querySelectorAll("#"+a+" ."+e);[].forEach.call(t,function(g){_ae(g,"drag",l);_ae(g,"dragstart",q,!0);_ae(g,"dragenter",c);_ae(g,"dragover",
m);_ae(g,"dragleave",b);_ae(g,"drop",d);_ae(g,"dragend",f);_ae(g,"touchmove",v);_ae(g,"click",r)})},selalb:function(){return n?n.getAttribute("data-aid"):0}}}(jQuery);
(function(h,k){function q(f){switch(f.charCode){case 32:case 13:case 27:c(f)}}function m(f){switch(f.keyCode){case 32:case 13:case 27:c(f)}}function c(f){_pd(f);document.body.removeChild(b)}var b,d;k.iZoomOpen=function(f){d=document.createElement("div");h.post(Meedya.rawURL,{task:"manage.getZoomItem",iid:f},function(l){d.innerHTML=l});d.className="zoom-area";d.tabIndex="-1";b=document.createElement("div");b.className="zoom-back";b.appendChild(d);document.body.appendChild(b);_ae(d,"keypress",q,!1);
_ae(d,"keydown",m,!1);d.focus();_ae(b,"click",c,!1)};k.iZoomClose=c})(jQuery,window);