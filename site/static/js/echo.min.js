/*
	Copyright (C) 2022 RJCreations. All rights reserved.
 @license		GNU General Public License version 3 or later; see LICENSE.txt
*/
'use strict';(function(c,k){"function"===typeof define&&define.amd?define(function(){return k(c)}):"object"===typeof exports?module.exports=k:c.echo=k(c)})(this,function(c){var k,v,w,x;const r="data-echo",l="data-echo-background",t="data-echo-placeholder";let f={},n=function(){},m,y,z,p,A;const q=()=>{if(z||!m)clearTimeout(m),m=setTimeout(()=>{f.render();m=null},y)};f.init=a=>{a=a||{};var d=a.offset||0;let e=a.offsetVertical||d;d=a.offsetHorizontal||d;A=a.baseUrl||"";k=parseInt(a.offsetTop||e,10);
v=parseInt(a.offsetBottom||e,10);w=parseInt(a.offsetLeft||d,10);x=parseInt(a.offsetRight||d,10);y=parseInt(a.throttle||250,10);z=!1!==a.debounce;p=!!a.unload;n=a.callback||n;f.render();c.addEventListener("scroll",q);c.addEventListener("load",q);window.addEventListener("resize",q)};f.render=a=>{a=(a||document).querySelectorAll(`[${r}], [${l}]`);let d=a.length,e,b,B={l:0-w,t:0-k,b:(c.innerHeight||document.documentElement.clientHeight)+v,r:(c.innerWidth||document.documentElement.clientWidth)+x};for(let u=
0;u<d;u++){b=a[u];var g=b;var h=B;null===g.offsetParent?h=!1:(g=g.getBoundingClientRect(),h=g.right>=h.l&&g.bottom>=h.t&&g.left<=h.r&&g.top<=h.b);h?(p&&b.setAttribute(t,b.src),null!==b.getAttribute(l)?b.style.backgroundImage="url("+b.getAttribute(l)+")":b.src!==(e=A+b.getAttribute(r))&&(b.src=e),p||(b.removeAttribute(r),b.removeAttribute(l)),n(b,"load")):p&&(e=b.getAttribute(t))&&(null!==b.getAttribute(l)?b.style.backgroundImage="url("+e+")":b.src=e,b.removeAttribute(t),n(b,"unload"))}d||f.detach()};
f.detach=()=>{c.removeEventListener("scroll",q);clearTimeout(m)};return f});