/*
	Copyright (C) 2022 RJCreations. All rights reserved.
 @license		GNU General Public License version 3 or later; see LICENSE.txt
*/
'use strict';(function(c,l){"function"===typeof define&&define.amd?define(function(){return l(c)}):"object"===typeof exports?module.exports=l:c.echo=l(c)})(this,function(c){var l,v,w,x;const r="data-echo",m="data-echo-background",t="data-echo-placeholder";let g={},p=function(){},n,y,z,q,A;const d=()=>{if(z||!n)clearTimeout(n),n=setTimeout(()=>{g.render();n=null},y)};g.init=a=>{a=a||{};var e=a.offset||0;let f=a.offsetVertical||e;e=a.offsetHorizontal||e;A=a.baseUrl||"";l=parseInt(a.offsetTop||f,10);
v=parseInt(a.offsetBottom||f,10);w=parseInt(a.offsetLeft||e,10);x=parseInt(a.offsetRight||e,10);y=parseInt(a.throttle||250,10);z=!1!==a.debounce;q=!!a.unload;p=a.callback||p;g.render();document.addEventListener?(c.addEventListener("scroll",d),c.addEventListener("load",d),window.addEventListener("resize",d)):(c.attachEvent("onscroll",d),c.attachEvent("onload",d),window.attachEvent("resize",d))};g.render=a=>{a=(a||document).querySelectorAll(`[${r}], [${m}]`);let e=a.length,f,b,B={l:0-w,t:0-l,b:(c.innerHeight||
document.documentElement.clientHeight)+v,r:(c.innerWidth||document.documentElement.clientWidth)+x};for(let u=0;u<e;u++){b=a[u];var h=b;var k=B;null===h.offsetParent?k=!1:(h=h.getBoundingClientRect(),k=h.right>=k.l&&h.bottom>=k.t&&h.left<=k.r&&h.top<=k.b);k?(q&&b.setAttribute(t,b.src),null!==b.getAttribute(m)?b.style.backgroundImage="url("+b.getAttribute(m)+")":b.src!==(f=A+b.getAttribute(r))&&(b.src=f),q||(b.removeAttribute(r),b.removeAttribute(m)),p(b,"load")):q&&(f=b.getAttribute(t))&&(null!==b.getAttribute(m)?
b.style.backgroundImage="url("+f+")":b.src=f,b.removeAttribute(t),p(b,"unload"))}e||g.detach()};g.detach=()=>{document.removeEventListener?c.removeEventListener("scroll",d):c.detachEvent("onscroll",d);clearTimeout(n)};return g});