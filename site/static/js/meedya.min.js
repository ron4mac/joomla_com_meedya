/*
	Copyright (C) 2022 RJCreations. All rights reserved.
 @license		GNU General Public License version 3 or later; see LICENSE.txt
*/
'use strict';var Meedya={};
(function(g,c){var k,p=Meedya;const q={vopts:{video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}" playsinline ><source src="{{src}}" type="{{format}}" />Sorry, your browser does not support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',autoStart:!0}},sopts:{loop:!1,slideShow:{speed:5E3}},ivbuts:{buttons:["zoom","slideShow","fullScreen","download","close"]},ssbuts:{buttons:["fullScreen","close"],slideShow:{autoStart:!0}},
showSlide:(a,b)=>{a.preventDefault();a=JSON.parse(JSON.stringify(p.items));Meedya.FB4?Fancybox.show(a,{startIndex:b}):c.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ivbuts),b)},slideShow:a=>{a.preventDefault();a=JSON.parse(JSON.stringify(Meedya.items));Meedya.FB4?Fancybox.show(a):c.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ssbuts))}},v={showSlide:(a,b)=>{a.preventDefault();c("#sstage").appendTo("body").show();ssCtl.init(Meedya.items,b)}};Meedya.initIV=(a=!1)=>{Meedya.viewer=
a?v:q};Meedya.performSearch=a=>{if(""===c.trim(a.sterm.value))return alert(p.L.no_sterm),!1;a.submit();return!1};Meedya.thmClick=a=>{let b=a.target;switch(b.className){case "imgthm":a.stopPropagation();q.showSlide(a,+b.parentElement.parentElement.parentElement.dataset.ix);break;case "strating":b=b.parentElement;case "strback":b=b.parentElement;case "strate":a.stopPropagation();if(!d)break;a=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid;Meedya.dorate(a,b);break;case "far fa-comments":case "icon-comments-2":b=
b.parentElement;case "mycmnts":case "mycmnts hasem":a.stopPropagation(),a=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid,Meedya.doComments(a,b)}};var d,r,t;const w=a=>{(0!==a.detail||confirm("Clear rating for this item?"))&&c.post(g.rawURL,{[k]:1,task:"rateItem",iid:f,val:a.detail}).done(b=>{t.firstElementChild.firstElementChild.style.width=b+"%";c(d).modal("hide");r.enable()}).fail(b=>{alert(b.responseText);c(d).modal("hide")})};Meedya.dorate=(a,b)=>{f=a;t=b;c.post(g.rawURL,
{task:"rateChk",iid:a}).done(()=>{c(d).modal("show")}).fail(l=>{alert(l.responseText)})};var f=0,m,u,h,n;const x=a=>{f=a;n.innerHTML="";c.post(g.rawURL,{[k]:1,task:"getComments",iid:a}).done(b=>{n.innerHTML=b;c(u).modal("show")}).fail(b=>{alert(b.responseText)})};Meedya.submitComment=a=>{a.disabled=!0;let b={iid:f},l=new FormData(newcmnt);for(let e of l.entries())b[e[0]]=e[1];c.post(g.rawURL,b).done(e=>{c(h).modal("hide");a.disabled=!1;m.classList.add("hasem");m.innerHTML=e}).fail(e=>{alert(e.responseText)})};
Meedya.doComments=(a,b)=>{f=a;m=b;b.classList.contains("hasem")?x(a):(document.getElementById("cmnt-text").value="",c(h).modal("show"))};Meedya.sprintf=a=>{for(var b=1;b<arguments.length;b++)a=a.replace(/%s/,arguments[b]);return a};c(document).ready(()=>{c("["+Meedya.datatog+'="tooltip"]').tooltip();k=Joomla.getOptions("csrf.token","");if(d=document.getElementById("rating-modal")){d.addEventListener("hidden.bs.modal",b=>{c(d).modal("hide")});var a=document.getElementById("unrating");r=new SimpleStarRating(a);
a.addEventListener("rate",w)}(u=document.getElementById("comments-modal"))&&(n=document.querySelector(".modal-body .comments"));(h=document.getElementById("comment-modal"))&&h.addEventListener("shown.bs.modal",b=>{document.getElementById("cmnt-text").focus()})})})(Joomla.getOptions("Meedya"),jQuery);