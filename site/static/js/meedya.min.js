'use strict';(function(c,y){let p,e,u,v,g=0,q,w,l,r,t;const f=a=>document.getElementById(a),x={vopts:{video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}" playsinline ><source src="{{src}}" type="{{format}}" />Sorry, your browser does not support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',autoStart:!0}},sopts:{loop:!1,slideShow:{speed:5E3}},ivbuts:{buttons:["zoom","slideShow","fullScreen","download",
"close"]},ssbuts:{buttons:["fullScreen","close"],slideShow:{autoStart:!0}},showSlide:(a,b)=>{c._pd(a);a=JSON.parse(JSON.stringify(c.items));c.FB4?Fancybox.show(a,{startIndex:b}):jQuery.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ivbuts),b)},slideShow:a=>{c._pd(a);a=JSON.parse(JSON.stringify(c.items));c.FB4?Fancybox.show(a):jQuery.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ssbuts))}},z={showSlide:(a,b)=>{c._pd(a);jQuery("#sstage").appendTo("body").show();ssCtl.init(c.items,
b)}},h=c._oM,m=c._cM,k=c._P,A=(a,b,d)=>{g=b;v=d;y.isAdmin&&a.metaKey?h(e):k("rateChk",{iid:b},n=>{n?alert(n):h(e)})},B=a=>{g=a;t.innerHTML="";k("getComments",{[p]:1,iid:a},b=>{t.innerHTML=b;h(w)})},C=a=>{(0!==a.detail||confirm("Clear rating for this item?"))&&k("rateItem",{[p]:1,iid:g,val:a.detail},b=>{v.firstElementChild.firstElementChild.style.width=b+"%";u.enable()},!1,()=>m(e))};c.initIV=(a=!1)=>{c.viewer=a?z:x};c.performSearch=a=>{if(""===a.sterm.value.trim())return alert(c.L.no_sterm),!1;a.submit();
return!1};c.thmClick=a=>{var b=a.target;let d;switch(b.className){case "imgthm":a.stopPropagation();x.showSlide(a,+b.parentElement.parentElement.parentElement.dataset.ix);break;case "strating":b=b.parentElement;case "strback":b=b.parentElement;case "strate":a.stopPropagation();if(!e)break;d=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid;A(a,d,b);break;case "far fa-comments":case "icon-comments-2":b=b.parentElement;case "mycmnts":case "mycmnts hasem":a.stopPropagation(),g=a=
d=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid,q=b,b.classList.contains("hasem")?B(a):(f("cmnt-text").value="",h(l))}};c.submitComment=a=>{a.disabled=!0;let b=new FormData(newcmnt);b.append("iid",g);k(null,b,d=>{m(l);a.disabled=!1;q.classList.add("hasem");q.innerHTML=d})};c.submitPlaylist=a=>{a.disabled=!0;a=new FormData(picframe);a.append("aid",c.albumID);k("picframekey",a,b=>{document.forms.picframe.pfkey.value=b.key;let d="toolbar=no,status=no,location=no,menubar=no,resizable=0,scrollbars=1,width=460,height=200,left="+
(screen.width-460)/2+",top="+(screen.height-200)/2,n=encodeURI(b.title);b=encodeURI(b.key);window.open("http://picframe.local?nplk="+b+"&nplt="+n,"",d)},!0);m(r)};c.doPicframe=()=>{h(r)};c._ae(document,"DOMContentLoaded",()=>{p=Joomla.getOptions("csrf.token","");if(e=f("rating-modal")){c._ae(e,"hidden.bs.modal",b=>{m(e)});var a=f("unrating");u=new SimpleStarRating(a);c._ae(a,"rate",C)}(w=f("comments-modal"))&&(t=document.querySelector(".modal-body .comments"));(l=f("comment-modal"))&&c._ae(l,"shown.bs.modal",
b=>{c._id("cmnt-text").focus()});r=f("picframe-modal")})})(window.Meedya=window.Meedya||{},Joomla.getOptions("Meedya"));