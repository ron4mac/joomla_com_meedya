'use strict';(function(c,y,m){let n,d,t,u,f=0,p,v,h,q;const g=a=>document.getElementById(a),w={vopts:{video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}" playsinline ><source src="{{src}}" type="{{format}}" />Sorry, your browser does not support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',autoStart:!0}},sopts:{loop:!1,slideShow:{speed:5E3}},ivbuts:{buttons:["zoom","slideShow","fullScreen","download",
"close"]},ssbuts:{buttons:["fullScreen","close"],slideShow:{autoStart:!0}},showSlide:(a,b)=>{c._pd(a);a=JSON.parse(JSON.stringify(c.items));c.FB4?Fancybox.show(a,{startIndex:b}):m.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ivbuts),b)},slideShow:a=>{c._pd(a);a=JSON.parse(JSON.stringify(c.items));c.FB4?Fancybox.show(a):m.fancybox.open(a,Object.assign({},this.sopts,this.vopts,this.ssbuts))}},z={showSlide:(a,b)=>{c._pd(a);m("#sstage").appendTo("body").show();ssCtl.init(c.items,b)}},k=
c._oM,r=c._cM,l=c._P,A=(a,b,e)=>{f=b;u=e;y.isAdmin&&a.metaKey?k(d):l("rateChk",{iid:b},x=>{x?alert(x):k(d)})},B=a=>{f=a;q.innerHTML="";l("getComments",{[n]:1,iid:a},b=>{q.innerHTML=b;k(v)})},C=a=>{(0!==a.detail||confirm("Clear rating for this item?"))&&l("rateItem",{[n]:1,iid:f,val:a.detail},b=>{u.firstElementChild.firstElementChild.style.width=b+"%";t.enable()},!1,()=>r(d))};c.initIV=(a=!1)=>{c.viewer=a?z:w};c.performSearch=a=>{if(""===a.sterm.value.trim())return alert(c.L.no_sterm),!1;a.submit();
return!1};c.thmClick=a=>{var b=a.target;let e;switch(b.className){case "imgthm":a.stopPropagation();w.showSlide(a,+b.parentElement.parentElement.parentElement.dataset.ix);break;case "strating":b=b.parentElement;case "strback":b=b.parentElement;case "strate":a.stopPropagation();if(!d)break;e=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid;A(a,e,b);break;case "far fa-comments":case "icon-comments-2":b=b.parentElement;case "mycmnts":case "mycmnts hasem":a.stopPropagation(),f=a=
e=+b.parentElement.parentElement.parentElement.parentElement.dataset.iid,p=b,b.classList.contains("hasem")?B(a):(g("cmnt-text").value="",k(h))}};c.submitComment=a=>{a.disabled=!0;let b=new FormData(newcmnt);b.append("iid",f);l(null,b,e=>{r(h);a.disabled=!1;p.classList.add("hasem");p.innerHTML=e})};c._ae(document,"DOMContentLoaded",()=>{n=Joomla.getOptions("csrf.token","");if(d=g("rating-modal")){c._ae(d,"hidden.bs.modal",b=>{r(d)});var a=g("unrating");t=new SimpleStarRating(a);c._ae(a,"rate",C)}(v=
g("comments-modal"))&&(q=document.querySelector(".modal-body .comments"));(h=g("comment-modal"))&&c._ae(h,"shown.bs.modal",b=>{c._id("cmnt-text").focus()})})})(window.Meedya=window.Meedya||{},Joomla.getOptions("Meedya"),jQuery);