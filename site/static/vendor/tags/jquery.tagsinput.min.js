'use strict';(function(a){var l=[],h=[];a.fn.doAutosize=function(c){var b=a(this).data("minwidth"),g=a(this).data("maxwidth"),f="",d=a(this),k=a("#"+a(this).data("tester_id"));f!==(f=d.val())&&(f=f.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),k.html(f),k=k.width(),c=k+c.comfortZone>=b?k+c.comfortZone:b,k=d.width(),(c<k&&c>=b||c>b&&c<g)&&d.width(c))};a.fn.resetAutosize=function(c){var b=a(this).data("minwidth")||c.minInputWidth||a(this).width();c=a(this).data("maxwidth")||
c.maxInputWidth||a(this).closest(".tagsinput").width()-c.inputPadding;var g=a(this),f=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:g.css("fontSize"),fontFamily:g.css("fontFamily"),fontWeight:g.css("fontWeight"),letterSpacing:g.css("letterSpacing"),whiteSpace:"nowrap"}),d=a(this).attr("id")+"_autosize_tester";0>=a("#"+d).length&&(f.attr("id",d),f.appendTo("body"));g.data("minwidth",b);g.data("maxwidth",c);g.data("tester_id",d);g.css("width",b)};a.fn.addTag=function(c,
b){b=jQuery.extend({focus:!1,callback:!0},b);this.each(function(){var g=a(this).attr("id"),f=a(this).val().split(l[g]);""===f[0]&&(f=[]);c=jQuery.trim(c);if(b.unique){var d=a(this).tagExist(c);!0===d&&a("#"+g+"_tag").addClass("not_valid")}else d=!1;if(""!==c&&!0!==d&&(a("<span>").addClass("tag").append(a("<span>").text(c).append("&nbsp;&nbsp;"),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+g).removeTag(encodeURIComponent(c))})).insertBefore("#"+g+"_addTag"),f.push(c),
a("#"+g+"_tag").val(""),b.focus?a("#"+g+"_tag").focus():a("#"+g+"_tag").blur(),a.fn.tagsInput.updateTagsField(this,f),b.callback&&h[g]&&h[g].onAddTag&&(d=h[g].onAddTag,d.call(this,c)),h[g]&&h[g].onChange)){var k=f.length;d=h[g].onChange;d.call(this,a(this),f[k-1])}});return!1};a.fn.removeTag=function(c){c=decodeURIComponent(c);this.each(function(){var b=a(this).attr("id"),g=a(this).val().split(l[b]);a("#"+b+"_tagsinput .tag").remove();var f="";for(let d=0;d<g.length;d++)g[d]!=c&&(f=f+l[b]+g[d]);a.fn.tagsInput.importTags(this,
f);h[b]&&h[b].onRemoveTag&&h[b].onRemoveTag.call(this,c)});return!1};a.fn.tagExist=function(c){var b=a(this).attr("id");b=a(this).val().split(l[b]);return 0<=jQuery.inArray(c,b)};a.fn.importTags=function(c){var b=a(this).attr("id");a("#"+b+"_tagsinput .tag").remove();a.fn.tagsInput.importTags(this,c)};a.fn.tagsInput=function(c){var b=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,
placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},c),g=0;this.each(function(){if("undefined"===typeof a(this).attr("data-tagsinput-init")){a(this).attr("data-tagsinput-init",!0);b.hide&&a(this).hide();var f=a(this).attr("id");if(!f||l[a(this).attr("id")])f=a(this).attr("id","tags"+(new Date).getTime()+g++).attr("id");var d=jQuery.extend({pid:f,real_input:"#"+f,holder:"#"+f+"_tagsinput",input_wrapper:"#"+f+"_addTag",fake_input:"#"+f+"_tag"},b);l[f]=d.delimiter;if(b.onAddTag||b.onRemoveTag||
b.onChange)h[f]=[],h[f].onAddTag=b.onAddTag,h[f].onRemoveTag=b.onRemoveTag,h[f].onChange=b.onChange;var k='<div id="'+f+'_tagsinput" class="tagsinput"><div id="'+f+'_addTag">';b.interactive&&(k=k+'<input id="'+f+'_tag" value="" data-default="'+b.defaultText+'" />');a(k+'</div><div class="tags_clear"></div></div>').insertAfter(this);a(d.holder).css("width",b.width);""!==a(d.real_input).val()&&a.fn.tagsInput.importTags(a(d.real_input),a(d.real_input).val());if(b.interactive){a(d.fake_input).val(a(d.fake_input).attr("data-default"));
a(d.fake_input).css("color",b.placeholderColor);a(d.fake_input).resetAutosize(b);a(d.holder).bind("click",d,function(e){a(e.data.fake_input).focus()});a(d.fake_input).bind("focus",d,function(e){a(e.data.fake_input).val()==a(e.data.fake_input).attr("data-default")&&a(e.data.fake_input).val("");a(e.data.fake_input).css("color","#000000")});if(void 0!==b.autocomplete_url){k={source:b.autocomplete_url};for(var n in b.autocomplete)k[n]=b.autocomplete[n];void 0!==jQuery.Autocompleter?(a(d.fake_input).autocomplete(b.autocomplete_url,
b.autocomplete),a(d.fake_input).bind("result",d,function(e,m,q){m&&a("#"+f).addTag(m[0]+"",{focus:!0,unique:b.unique})})):void 0!==jQuery.ui.autocomplete&&(a(d.fake_input).autocomplete(k),a(d.fake_input).bind("autocompleteselect",d,function(e,m){a(e.data.real_input).addTag(m.item.value,{focus:!0,unique:b.unique});return!1}))}else a(d.fake_input).bind("blur",d,function(e){var m=a(this).attr("data-default");""!==a(e.data.fake_input).val()&&a(e.data.fake_input).val()!=m?e.data.minChars<=a(e.data.fake_input).val().length&&
(!e.data.maxChars||e.data.maxChars>=a(e.data.fake_input).val().length)&&a(e.data.real_input).addTag(a(e.data.fake_input).val(),{focus:!0,unique:b.unique}):(a(e.data.fake_input).val(a(e.data.fake_input).attr("data-default")),a(e.data.fake_input).css("color",b.placeholderColor));return!1});a(d.fake_input).bind("keypress",d,function(e){if(p(e))return e.preventDefault(),e.data.minChars<=a(e.data.fake_input).val().length&&(!e.data.maxChars||e.data.maxChars>=a(e.data.fake_input).val().length)&&a(e.data.real_input).addTag(a(e.data.fake_input).val(),
{focus:!0,unique:b.unique}),a(e.data.fake_input).resetAutosize(b),!1;e.data.autosize&&a(e.data.fake_input).doAutosize(b)});d.removeWithBackspace&&a(d.fake_input).bind("keydown",function(e){if(8==e.keyCode&&""===a(this).val()){e.preventDefault();e=a(this).closest(".tagsinput").find(".tag:last").text();var m=a(this).attr("id").replace(/_tag$/,"");e=e.replace(/[\s]+x$/,"");a("#"+m).removeTag(encodeURIComponent(e));a(this).trigger("focus")}});a(d.fake_input).blur();d.unique&&a(d.fake_input).keydown(function(e){(8==
e.keyCode||String.fromCharCode(e.which).match(/\w+|[\u00e1\u00e9\u00ed\u00f3\u00fa\u00c1\u00c9\u00cd\u00d3\u00da\u00f1\u00d1,/]+/))&&a(this).removeClass("not_valid")})}}});return this};a.fn.tagsInput.updateTagsField=function(c,b){var g=a(c).attr("id");a(c).val(b.join(l[g]))};a.fn.tagsInput.importTags=function(c,b){a(c).val("");var g=a(c).attr("id");b=b.split(l[g]);let f;for(f=0;f<b.length;f++)a(c).addTag(b[f],{focus:!1,callback:!1});h[g]&&h[g].onChange&&h[g].onChange.call(c,c,b[f])};var p=function(c){var b=
!1;if(13==c.which)return!0;"string"===typeof c.data.delimiter?c.which==c.data.delimiter.charCodeAt(0)&&(b=!0):a.each(c.data.delimiter,function(g,f){c.which==f.charCodeAt(0)&&(b=!0)});return b}})(jQuery);